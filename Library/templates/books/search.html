{% extends "base.html" %}
{% block title %}Search Books{% endblock %}

{% block content %}
<h2 class="mb-3">Search Books</h2>

<form method="get" class="mb-4">
  <div class="input-group">
    <input
      class="form-control"
      name="q"
      placeholder="Search books..."
      value="{{ query|default:'' }}"
      required
    >
    <button class="btn btn-primary">Search</button>
  </div>
</form>

{% if results %}
  <div class="list-group">
    {% for item in results %}
      <div class="list-group-item">
        <h5>{{ item.volumeInfo.title }}</h5>
        <p class="mb-2 text-muted">
          {{ item.volumeInfo.authors|join:", " }}
        </p>

        <form method="post" action="{% url 'save-book' %}">
          {% csrf_token %}
          <input type="hidden" name="google_book_id" value="{{ item.id }}">
          <button class="btn btn-sm btn-success">Save</button>
        </form>
      </div>
    {% endfor %}
  </div>
{% endif %}
{% endblock %}
